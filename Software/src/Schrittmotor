// https://starthardware.org/arduino-a4988-nema17/ : Informationen fuer die Steuerung des Schrittmotors
// https://docs.arduino.cc/built-in-examples/basics/AnalogReadSerial : Dokumentation zum Auslesen eines Potentiometers
int IstWinkel;
int EingestellterWinkel;
int steps;


/*
Diese Funktion stellt den Abwurfwinkel ein. 
*/
void Winkeleinstellung (int Wunschwinkel, int stepsProUmdrehung, int direction, int step){
  if (Wunschwinkel<IstWinkel){
    digitalWrite(direction, HIGH); //im Uhrzeigersinn
    steps = (IstWinkel-Wunschwinkel) * (stepsProUmdrehung/360); //Umrechnung wie viele Steps gemacht werden
  }
  else {
    digitalWrite(direction, LOW); // gegen den Uhrzeigersinn
    steps = (Wunschwinkel - IstWinkel) * (stepsProUmdrehung/360); //Umrechnung wie viele Steps gemacht werden
  }
    for(int stepCounter = 0; stepCounter < steps; stepCounter++) {
      digitalWrite(step,HIGH);
      delayMicroseconds(500);
      digitalWrite(step,LOW);
      delayMicroseconds(500);
    }
delay(1000);
}

/*
Diese Funktion ueberprueft den Ist-Winkel mit dem Soll-Winkel
*/
int Winkelueberpruefung (){
  IstWinkel = analogRead(A0);
  return IstWinkel;
}