// https://starthardware.org/arduino-a4988-nema17/ : Informationen fuer die Steuerung des Schrittmotors
// https://docs.arduino.cc/built-in-examples/basics/AnalogReadSerial : Dokumentation zum Auslesen eines Potentiometers
int IstWinkel;
int EingestellterWinkel;
int steps;


/*
Diese Funktion stellt den Abwurfwinkel ein. 
*/
void Winkeleinstellung (int Wunschwinkel, int stepsProUmdrehung, int direction, int step){
  if (Wunschwinkel<IstWinkel){
    //Serial.println("Uhrzeigersinn");
    digitalWrite(direction, HIGH); //im Uhrzeigersinn
    steps = (IstWinkel-Wunschwinkel) * (stepsProUmdrehung/360); //Umrechnung wie viele Steps gemacht werden
  }
  else {
    //Serial.println("gegen Uhrzeigersinn");
    digitalWrite(direction, LOW); // gegen den Uhrzeigersinn
    //steps = 1000;
    steps = (Wunschwinkel - IstWinkel) * (stepsProUmdrehung/360); //Umrechnung wie viele Steps gemacht werden
  }
    for(int stepCounter = 0; stepCounter < steps; stepCounter++) {
      digitalWrite(step,HIGH);
      delayMicroseconds(5000);
      digitalWrite(step,LOW);
      delayMicroseconds(5000);
      //Serial.println(stepCounter);
    }
delay(1000);
}

/*
Diese Funktion vergleicht den Ist-Winkel mit dem Soll-Winkel und gibt den Ist-Winkel zurueck.
*/
int Winkelueberpruefung (){
  // IstWinkel = analogRead(A0);
  return IstWinkel;
}